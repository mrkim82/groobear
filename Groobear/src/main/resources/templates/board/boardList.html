<!DOCTYPE html>
<html
 xmlns:th="http://www.thymeleaf.org" xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
 layout:decorate="~{layout/boardTiles}">
 
<head>
<meta charset="UTF-8">
<title>Insert title here</title>
<style>
ul {
	list-style:none;
}

li {
	float: left;
	padding: 10px;
}
a { 
	text-decoration:none ;
	color: black;
}
</style>
</head>

<body>

<div layout:fragment="content" >
  <div>
    <p th:if="${boardVO.boardType == 'N'}">공지사항</p>
    <p th:if="${boardVO.boardType == 'C'}">언론보도</p>
    <p th:if="${boardVO.boardType == 'K'}">자유게시판</p>
	<table id="list" class="table">
		<thead>
			<tr>
				<td>글번호</td>
				<td>제목</td>
				<td>작성자</td>
				<td>작성일자</td>
				<td>조회수</td>
			</tr>
		</thead>
		<tbody id="bodyWash">
			<tr th:each="board, stat : ${boardList}" th:attr="onclick='window.location.href=\'/boardInfo?boardNo=' + ${board.boardNo} + '\''">
				<td th:text="${paging.totalCount - ((paging.cri.page-1) * paging.cri.perPageNum) - stat.index}"></td>
				<td>[[${board.title}]]</td>
				<td>[[${board.name}]]</td>
				<td th:text="${#dates.format(board.insertDate, 'yyyy.MM.dd')}"></td>
				<td>[[${board.count}]]</td>
				<td style="display:none;">[[${board.boardType}]]</td>
			</tr>
		</tbody>
	</table>
	<div>
	
    <ul class="paging" th:if="${paging.endPage != 0}">
        <li th:if="${paging.prev}">
            <a th:href="|javascript:goPage([[${paging.startPage-1}]])|">이전</a>
        </li>
        <li th:each="num : ${#numbers.sequence(paging.startPage, paging.endPage)}">
            <a th:href="|javascript:goPage([[${num}]])|" th:text="${num}"></a>
        </li>
        <li th:if="${paging.next and paging.endPage > 0}">
            <a th:href="|javascript:goPage([[${paging.endPage+1}]])|">다음</a>
        </li>
    </ul>

	</div>
	</div>
	<div>
		<button type="button" id="write" th:onclick="|location.href='@{/boardInsert(boardType=${boardVO.boardType})}'|">글쓰기</button>
		<!-- <button type="button" id="write" th:onclick="goWrite()">글쓰기</button> -->
		<form name="searchForm" action="boardList">
		<input type="hidden" name="boardType" th:value="N"/>
		<input type="hidden" name="page" value="1"/>
		<select name="type">
			<option value='' selected>-- 선택 --</option>
			<option value='title' th:selected="${criteria.type == 'title'}">제목</option>
			<option value='content' th:selected="${criteria.type == 'content'}">내용</option>
			<option value='name' th:selected="${criteria.type == 'name'}">작성자</option>
		</select>
		<input type="text" name="keyword" th:value="${criteria.keyword}"/>
		<button type="submit" id="searchBtn">검색</button>
		<button type="button" id="resetBtn" onclick="formInit()">초기화</button>
	</div>
		</form>
		<!-- 모달띄우기 -->
		<div class="modal fade" id="deletePostModal" tabindex="-1"
			role="dialog" aria-labelledby="deletePostModalLabel"
			aria-hidden="true">
			<div class="modal-dialog modal-dialog-centered" role="document">
				<div class="modal-content">
					<div class="modal-header">
						<h5 class="modal-title" id="deletePostModalLabel">게시글 삭제</h5>
						<button type="button" class="close" data-dismiss="modal"
							aria-label="Close">
							<span aria-hidden="true">&times;</span>
						</button>
					</div>
					<div class="modal-body">게시글을 정말로 삭제하시겠습니까?</div>
					<div class="modal-footer">
						<button id="firstCancel" type="button" class="btn btn-secondary"
							data-dismiss="modal">취소</button>
						<button type="button" class="btn btn-danger" id="deleteButton">삭제</button>
					</div>
				</div>
			</div>
		</div>
		
<script th:inline="javascript">
	//input 태그 안에 빈 값인데 검색 버튼을 눌렀을 때 실행하는 함수.
	function noValue() {
		
	}
	var inputTag = document.querySelector('input[name="keyword"]')
	if(document.querySelector('select option').value == '') {
		novale();
	} else {
		
	}
	
// function goWrite() {
	
// 	let bT = /*[[${boardVO.boardType}]]*/
//      console.log(bT)
//      window.location.href ='/boardInsert?boardType=' + bT
// }
function goPage(p) {
	//event.preventDefault();
	searchForm.page.value=p
	searchForm.submit();
}
//초기화
function formInit() {
    let insertList = document.querySelectorAll('tbody > td');
    insertList.forEach(el => el.value = '');
}
//날짜포맷 맞춰주는 함수 
//https://carrotweb.tistory.com/160 참고사이트.
function SimpleDateTimeFormat(date, pattern) {
	var dateString = pattern.replace(/(yyyy|MM|dd|HH|mm|ss|SSS)/g, function(match) {
		var matchString = "";
		switch(match) {
			case "yyyy":
				matchString = date.getFullYear();
				break;
			case "MM":
				matchString = date.getMonth() + 1;
				break;
			case "dd":
				matchString = date.getDate();
				break;
			case "HH":
				matchString = date.getHours();
				break;
			case "mm":
				matchString = date.getMinutes();
				break;
			case "ss":
				matchString = date.getSeconds();
				break;
			case "SSS":
				matchString = date.getMilliseconds();
				break;
			default :
				matchString = match;
				break;
		}
		if (match == "SSS") {
			if (matchString < 10) {
				matchString = "00" + matchString;
			} else if (matchString < 100) {
				matchString = "0" + matchString;
			}
		} else {
			if ((typeof(matchString) == "number" && matchString < 10)) {
				matchString = "0" + matchString;
			}
		}
		return matchString;
	});

	return dateString;
}

</script>
</div>
</body>
</html>