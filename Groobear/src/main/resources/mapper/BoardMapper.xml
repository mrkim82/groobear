<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.groo.bear.board.mapper.BoardMapper">
	<select id="selectAllList" resultType="boardVO">
		SELECT BOARD_NO          
			   ,ID           
			   ,BOARD_TYPE     
			   ,TITLE        
			   ,CONTENT     
			   ,INSERT_DATE            
			   ,UPDATE_DATE           
			   ,COUNT       
	     FROM  BOARD
	 ORDER BY  BOARD_NO DESC
	</select>
	<select id="selectBoard" resultType="int">
		SELECT BOARD_NO
			   ,ID
			   ,BOARD_TYPE
			   ,TITLE
			   ,CONTENT
			   ,INSERT_DATE
			   ,UPDATE_DATE
			   ,COUNT
		FROM   BOARD
		WHERE  BOARD_NO = #{boardNo}
	</select>
	<insert id="insertBoard" parameterType="boardVO">
		<selectKey keyProperty="bNo"
				   resultType="int"
				   order="BEFORE">
			SELECT NVL(MAX(BOARD_NO), 0) + 1
			FROM BOARD
	   </selectKey>
	 
	   INSERT INTO BOARD (
	   			BOARD_NO
	   		<if test="title != '' and title != null">
	   		  , TITLE
	   		</if>
	   		<if test="content != '' and content != null">
	   		  , CONTENT
	   		</if>
	   		<if test="boardType != '' and boardType != null">
	   		  , BOARD_TYPE
	   		</if>
	   		  , INSERT_DATE
	   		  
	   ) VALUES (
	   			#{boardNo}
	   		<if test="title != '' and title != null">
	   		  , #{title}
	   		</if>
	   		<if test="content != '' and content != null">
	   		  , #{content}
	   		</if>
	   		<if test="boardType != '' and boardType != null">
	   		  , #{boardType}
	   		</if>
	   		  , sysdate
	   		  
	   )
	</insert>
	<!-- 파일 insert -->
	<insert id="addFiles" parameterType="filesVO">
		INSERT INTO FILES 
						   ( FILE_NO
						   , ORIGIN_FILE_NAME
						   , CHANGE_FILE_NAME
						   , FILE_SIZE
						   , FILE_DATE
						   , BOARD_NO
						   )
						   VALUES 
						   ( #{fileNo}
						   , #{originFileName}
						   , #{changeFileName}
						   , #{fileSize}
						   , sysdate
						   , #{boardNo}
						   )
	</insert>
</mapper>